import{i as e,a,g as t,O as s,o as l,c as o,w as c,b as n,d as r,t as u,e as i,f as d,s as g,r as y,h as m,j as f,k as p,l as _,m as v,n as S,p as h,q,u as w,F as x,S as E,v as b,x as k,y as C}from"./index-BasQm1Tr.js";const N=(s=>(l,o=t())=>{!e&&a(s,l,o)})(s),B=(e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t},O=B({__name:"entry-item",props:{EntryObj:{type:Object,default:{name:"请输入姓名",score:"请输入分数"}},RankNum:{type:String,default:"请输入排名"},ImageSrc:{type:String,default:"../../static/mc_lucky_block.jpg"}},setup:e=>(a,t)=>{const s=i,g=d;return l(),o(g,{class:"EntryItem"},{default:c((()=>[n(g,{class:"EntryBox"},{default:c((()=>[n(s,{class:"EntryImage",src:e.ImageSrc,mode:"aspectFill"},null,8,["src"]),n(g,{class:"EntryName"},{default:c((()=>[n(g,{class:"EntryKey"},{default:c((()=>[r("Name:")])),_:1}),n(g,{class:"EntryValue"},{default:c((()=>[r(u(e.EntryObj.name),1)])),_:1}),n(g,{class:"EntryKey"},{default:c((()=>[r("Score:")])),_:1}),n(g,{class:"EntryValue"},{default:c((()=>[r(u(e.EntryObj.score),1)])),_:1})])),_:1}),n(g,{class:"EntryRank"},{default:c((()=>[r(u(e.RankNum),1)])),_:1})])),_:1})])),_:1})}},[["__scopeId","data-v-8216d368"]]);function j(e={}){let{url:a,method:t="GET",header:s={},data:l={},isConsoleOutput:o=!1,isShowToast:c=!1,loadingText:n="加载中",completeText:r="完成"}=e,u="http://mc.vincentzyu233.xyz:8326/"+a;return o&&(console.log("-------[config]-------"),console.log("utils/request: requesting... config:"),console.log(e),console.log("-------[config]-------")),new Promise(((e,a)=>{c&&g({title:n}),y({url:u,data:l,method:t,header:s,success:a=>{o&&(console.log("-------[success]-------"),console.log("utils/request: success: res: "),console.log(a),console.log("-------[success]-------")),c&&m(),c&&f({title:r,icon:"success",duration:777}),e(a)},fail:e=>{o&&(console.log("-------[fail]-------"),console.log("utils/request: err: "),console.log(e),console.log("-------[fail]-------")),c&&m(),p({title:"[网络请求发生错误] 请联系开发人员VincentZyu",content:"error.detail: "+e,showCancel:!1}),a(e)},complete:()=>{}})}))}const I=_(),R=()=>I.statusBarHeight||0,L=()=>R()+(()=>{let e;if(uni.getMenuButtonBoundingClientRect){let{top:a,height:t}=uni.getMenuButtonBoundingClientRect();e=t+2*(a-R())}else e=60;return e})(),T=B({__name:"index",setup(e){const a=v(R()),t=v(I.screenHeight-L()),s=v(L()+100);let i="default";const g=()=>{i="NameAsc",console.log("按名字升序排序"),Z()},y=()=>{i="NameDesc",console.log("按名字降序排序"),Z()},m=()=>{i="ScoreAsc",console.log("按分数升序排序"),Z()},_=()=>{i="ScoreDesc",console.log("按分数降序排序"),Z()},B=v(0),T=v([]),A=v(""),D=v([]),V=v([]);async function $(){await j({url:`qwq_scoreboard/${A.value}`}).then((e=>{console.log("[qwq] getAllEntriesList(): res.data = "),console.log(e.data),D.value=e.data.scoreboard_data}))}async function Z(){var e,a;V.value=[],V.value=(e=D.value,a=i,e.sort(((e,t)=>"NameAsc"===a?e.name.localeCompare(t.name):"NameDesc"===a?t.name.localeCompare(e.name):"ScoreAsc"===a?e.score-t.score:"ScoreDesc"===a?t.score-e.score:0))),V.value.forEach((e=>{e.avatar_url=`https://minotar.net/avatar/${e.name}`})),console.log("reloadDisplayEntriesList(): displayEntriesList.value = "),console.log(V.value)}return N((async()=>{try{await async function(){await j({url:"qwq_scoreboard_list"}).then((e=>{console.log("[qwq] getScoreboardNamesList(): res.data = "),console.log(e.data),e.data&&0!=e.data.length?(f({title:"[qwq]获取计分板名称",icon:"success",duration:999}),T.value=e.data.scoreboard_name_list,A.value=T.value[0],setTimeout((()=>{f({title:`[qwq]设置默认显示计分板：...List[0] = ${A.value}`,icon:"success",duration:999})}),1999)):p({title:"[qwq]网络请求发生错误,请将此页面截图,并联系开发人员VincentZyu",content:"getScoreboardNamesList()获取计分板名称失败，要么没拿到，要么数组长度是0",showCancel:!1})}))}(),await $(),await Z()}catch(e){p({title:"[qwq]网络请求发生错误,请将此页面截图,并联系开发人员VincentZyu",content:`onLoad()回调函数里面发生了未知错误, err = ${e}`,showCancel:!1})}})),(e,i)=>{const f=d,p=k,v=E,N=(j=S("entry-item"),I=O,"string"==typeof j?I:j);var j,I;return l(),h(x,null,[n(f,{class:"WorksPage pageBg",style:q({top:w(L)()+"px",height:t.value+"px"})},null,8,["style"]),n(f,{class:"SortRulesContainer",style:q({top:a.value+"px"})},{default:c((()=>[n(p,{onClick:g},{default:c((()=>[r("名字升序")])),_:1}),n(p,{onClick:y},{default:c((()=>[r("名字降序")])),_:1}),n(p,{onClick:m},{default:c((()=>[r("分数升序")])),_:1}),n(p,{onClick:_},{default:c((()=>[r("分数降序")])),_:1})])),_:1},8,["style"]),n(v,{class:"ScoeboardNamesScrollBox","scroll-x":"",style:q({height:s.value+"px"})},{default:c((()=>[(l(!0),h(x,null,b(T.value,((e,a)=>(l(),o(f,{class:C(["ScoreboardOutBox",B.value==a?"active":""]),key:a,onClick:e=>(async e=>{console.log(`[qwq]changeActive(): 现在活跃的idx = ${e}`),B.value=e,A.value=T.value[e],await $(),await Z()})(a),style:q({top:w(L)()+"px"})},{default:c((()=>[n(f,{class:"ScoreboardNameBox"},{default:c((()=>[n(f,{class:"ScoreboardNameText"},{default:c((()=>[r(u(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class","onClick","style"])))),128))])),_:1},8,["style"]),n(v,{"scroll-y":"",class:"ScoeboardEntriesScrollBox"},{default:c((()=>[n(f,{class:"ScoreboardContent",style:q({paddingTop:s.value+"px"})},{default:c((()=>[(l(!0),h(x,null,b(V.value,((e,a)=>(l(),o(N,{class:"EntryItem",EntryObj:e,RankNum:(a+1).toString().padStart(2,"0"),ImageSrc:e.avatar_url},null,8,["EntryObj","RankNum","ImageSrc"])))),256))])),_:1},8,["style"])])),_:1})],64)}}},[["__scopeId","data-v-dfc7a6cd"]]);export{T as default};
